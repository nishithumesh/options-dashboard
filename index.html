<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Options Dashboard</title>
<style>
body {
font-family: Arial, sans-serif;
background: #fafafa;
color: #222;
text-align: center;
padding: 20px;
}
h2 {
margin-top: 40px;
}
.box {
border: 1px solid #ccc;
padding: 10px;
margin: 10px auto;
width: 90%;
max-width: 400px;
background: #fff;
border-radius: 8px;
}
.timestamp {
margin-top: 20px;
font-size: 14px;
color: #666;
}
</style>
</head>
<body>
<h2>NIFTY Option Chain</h2>
<div id="nifty-data" class="box">Loading...</div>

<h2>BANKNIFTY Option Chain</h2>
<div id="banknifty-data" class="box">Loading...</div>

<div class="timestamp" id="last-updated"></div>

<script>
const NIFTY_URL = "https://opensheet.elk.sh/1nKbdlZUVFX-zegMiYf21wSyN481ODOeDJ6f6V-ft3L4/NIFTY";
const BANKNIFTY_URL = "https://opensheet.elk.sh/1nKbdlZUVFX-zegMiYf21wSyN481ODOeDJ6f6V-ft3L4/BANKNIFTY";

async function fetchData() {
try {
const [niftyRes, bankRes] = await Promise.all([
fetch(NIFTY_URL),
fetch(BANKNIFTY_URL)
]);

const niftyData = await niftyRes.json();
const bankData = await bankRes.json();

document.getElementById("nifty-data").innerHTML = formatData(niftyData);
document.getElementById("banknifty-data").innerHTML = formatData(bankData);

const time = new Date().toLocaleTimeString();
document.getElementById("last-updated").textContent = "Last updated: " + time;
} catch (e) {
document.getElementById("nifty-data").innerText = "Error fetching data.";
document.getElementById("banknifty-data").innerText = "Error fetching data.";
}
}

function formatData(data) {
if (!data || data.length === 0) return "No data found";
let html = "<table style='width:100%;border-collapse:collapse;'><tr>";
for (let key in data[0]) {
html += `<th style='border:1px solid #ccc;padding:5px;'>${key}</th>`;
}
html += "</tr>";
data.forEach(row => {
html += "<tr>";
for (let key in row) {
html += `<td style='border:1px solid #ccc;padding:5px;'>${row[key]}</td>`;
}
html += "</tr>";
});
html += "</table>";
return html;
}

fetchData();
setInterval(fetchData, 5000); // refresh every 5 seconds
</script>
</body>
</html>
