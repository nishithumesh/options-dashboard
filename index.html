<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Live Option Chain Dashboard</title>
<style>
body {
font-family: Arial, sans-serif;
margin: 30px;
background: #f8f8f8;
color: #222;
text-align: center;
}
h2 {
margin-top: 40px;
border-bottom: 2px solid #ccc;
padding-bottom: 5px;
}
table {
width: 100%;
border-collapse: collapse;
margin-top: 10px;
}
th, td {
padding: 8px;
border: 1px solid #ccc;
}
th {
background-color: #eaeaea;
}
.timestamp {
margin-top: 20px;
color: #666;
font-size: 14px;
}
</style>
</head>
<body>
<h1>ðŸ“Š Live NIFTY & BANKNIFTY Option Chain</h1>

<h2>NIFTY Option Chain</h2>
<div id="niftyData">Loading...</div>

<h2>BANKNIFTY Option Chain</h2>
<div id="bankniftyData">Loading...</div>

<div class="timestamp" id="lastUpdated">Last updated: --</div>

<script>
const NIFTY_URL = "https://opensheet.elk.sh/1nKbdlZUVFX-zegMiYf21wSyN481ODOeDJ6f6V-ft3L4/NIFTY";
const BANKNIFTY_URL = "https://opensheet.elk.sh/1nKbdlZUVFX-zegMiYf21wSyN481ODOeDJ6f6V-ft3L4/BANKNIFTY";

async function fetchData() {
try {
const [niftyRes, bankRes] = await Promise.all([
fetch(NIFTY_URL),
fetch(BANKNIFTY_URL)
]);

const [niftyData, bankData] = await Promise.all([
niftyRes.json(),
bankRes.json()
]);

document.getElementById("niftyData").innerHTML = buildTable(niftyData);
document.getElementById("bankniftyData").innerHTML = buildTable(bankData);

const now = new Date();
document.getElementById("lastUpdated").innerText =
"Last updated: " + now.toLocaleTimeString();
} catch (error) {
document.getElementById("niftyData").innerHTML = "Error loading NIFTY data.";
document.getElementById("bankniftyData").innerHTML = "Error loading BANKNIFTY data.";
}
}

function buildTable(data) {
if (!data || data.length === 0) return "No data found";
const headers = Object.keys(data[0]);
let html = "<table><tr>";
headers.forEach(h => html += `<th>${h}</th>`);
html += "</tr>";
data.forEach(row => {
html += "<tr>";
headers.forEach(h => html += `<td>${row[h] || ""}</td>`);
html += "</tr>";
});
html += "</table>";
return html;
}

// Fetch immediately and every 5 seconds
fetchData();
setInterval(fetchData, 5000);
</script>
</body>
</html>
